!function($,window,document){"use strict";function Wickedpicker(a,b){this.element=$(a),this.options=$.extend({},defaults,b),this.element.addClass("hasWickedpicker"),this.element.attr("onkeypress","return false;"),this.element.attr("aria-showingpicker","false"),this.createPicker(),this.timepicker=$(".wickedpicker"),this.up=$("."+this.options.upArrow.split(/\s+/).join(".")),this.down=$("."+this.options.downArrow.split(/\s+/).join(".")),this.separator=$(".wickedpicker__controls__control--separator"),this.hoursElem=$(".wickedpicker__controls__control--hours"),this.minutesElem=$(".wickedpicker__controls__control--minutes"),this.secondsElem=$(".wickedpicker__controls__control--seconds"),this.meridiemElem=$(".wickedpicker__controls__control--meridiem"),this.close=$("."+this.options.close.split(/\s+/).join("."));var c=this.timeArrayFromString(this.options.now);this.options.now=new Date(today.getFullYear(),today.getMonth(),today.getDate(),c[0],c[1],c[2]),this.selectedHour=this.parseHours(this.options.now.getHours()),this.selectedMin=this.parseSecMin(this.options.now.getMinutes()),this.selectedSec=this.parseSecMin(this.options.now.getSeconds()),this.selectedMeridiem=this.parseMeridiem(this.options.now.getHours()),this.setHoverState(),this.attach(a),this.setText(a)}"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(a){return a.length>0&&this.substring(this.length-a.length,this.length)===a});var isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},today=new Date,pluginName="wickedpicker",defaults={now:today.getHours()+":"+today.getMinutes(),twentyFour:!1,upArrow:"wickedpicker__controls__control-up",downArrow:"wickedpicker__controls__control-down",close:"wickedpicker__close",hoverState:"hover-state",title:"Timepicker",showSeconds:!1,timeSeparator:" : ",secondsInterval:1,minutesInterval:1,beforeShow:null,afterShow:null,show:null,clearable:!1};$.extend(Wickedpicker.prototype,{showPicker:function(a){"function"==typeof this.options.beforeShow&&this.options.beforeShow(a,this.timepicker);var b=$(a).offset();if($(a).attr({"aria-showingpicker":"true",tabindex:-1}),this.setText(a),this.showHideMeridiemControl(),this.getText(a)!==this.getTime()){var c=this.getText(a),d=/\s\w\w$/.test(c)?c.substr(-2,2):null,e=c.split(this.options.timeSeparator),f={};f.hours=e[0],f.minutes=e[1],this.options.showSeconds?(f.seconds=e[2],f.meridiem=d):f.meridiem=d,this.setTime(f)}this.timepicker.css({"z-index":this.element.css("z-index")+1,position:"absolute",left:b.left,top:b.top+$(a)[0].offsetHeight}).show(),"function"==typeof this.options.show&&this.options.show(a,this.timepicker),this.handleTimeAdjustments(a)},hideTimepicker:function(a){function c(a){setTimeout(function(){$('[aria-showingpicker="false"]').attr("tabindex",a)},400)}this.timepicker.hide(),"function"==typeof this.options.afterShow&&this.options.afterShow(a,this.timepicker),{start:function(){var a=$.Deferred();return $('[aria-showingpicker="true"]').attr("aria-showingpicker","false"),a.promise()}}.start().then(c(0))},createPicker:function(){if(0===$(".wickedpicker").length){var a='<div class="wickedpicker"><p class="wickedpicker__title">'+this.options.title+'<span class="wickedpicker__close"></span></p><ul class="wickedpicker__controls"><li class="wickedpicker__controls__control"><span class="'+this.options.upArrow+'"></span><span class="wickedpicker__controls__control--hours" tabindex="-1">00</span><span class="'+this.options.downArrow+'"></span></li><li class="wickedpicker__controls__control--separator"><span class="wickedpicker__controls__control--separator-inner">:</span></li><li class="wickedpicker__controls__control"><span class="'+this.options.upArrow+'"></span><span class="wickedpicker__controls__control--minutes" tabindex="-1">00</span><span class="'+this.options.downArrow+'"></span></li>';this.options.showSeconds&&(a+='<li class="wickedpicker__controls__control--separator"><span class="wickedpicker__controls__control--separator-inner">:</span></li><li class="wickedpicker__controls__control"><span class="'+this.options.upArrow+'"></span><span class="wickedpicker__controls__control--seconds" tabindex="-1">00</span><span class="'+this.options.downArrow+'"></span> </li>'),a+='<li class="wickedpicker__controls__control"><span class="'+this.options.upArrow+'"></span><span class="wickedpicker__controls__control--meridiem" tabindex="-1">AM</span><span class="'+this.options.downArrow+'"></span></li></ul></div>',$("body").append(a),this.attachKeyboardEvents()}},showHideMeridiemControl:function(){!1===this.options.twentyFour?$(this.meridiemElem).parent().show():$(this.meridiemElem).parent().hide()},showHideSecondsControl:function(){this.options.showSeconds?$(this.secondsElem).parent().show():$(this.secondsElem).parent().hide()},attach:function(a){var b=this;this.options.clearable&&b.makePickerInputClearable(a),$(a).attr("tabindex",0),$(a).on("click focus",function(a){$(b.timepicker).is(":hidden")&&(b.showPicker($(this)),window.lasTimePickerControl=$(this),$(b.hoursElem).focus())});var c=function(a){$(b.timepicker).is(":visible")&&($(a.target).is(b.close)?b.hideTimepicker(window.lasTimePickerControl):$(a.target).closest(b.timepicker).length||$(a.target).closest($(".hasWickedpicker")).length?a.stopPropagation():b.hideTimepicker(window.lasTimePickerControl),window.lasTimePickerControl=null)};$(document).off("click",c).on("click",c)},attachKeyboardEvents:function(){$(document).on("keydown",$.proxy(function(a){switch(a.keyCode){case 9:"hasWickedpicker"!==a.target.className&&$(this.close).trigger("click");break;case 27:$(this.close).trigger("click");break;case 37:a.target.className!==this.hoursElem[0].className?$(a.target).parent().prevAll("li").not(this.separator.selector).first().children()[1].focus():$(a.target).parent().siblings(":last").children()[1].focus();break;case 39:a.target.className!==this.meridiemElem[0].className?$(a.target).parent().nextAll("li").not(this.separator.selector).first().children()[1].focus():$(a.target).parent().siblings(":first").children()[1].focus();break;case 38:$(":focus").prev().trigger("click");break;case 40:$(":focus").next().trigger("click")}},this))},setTime:function(a){this.setHours(a.hours),this.setMinutes(a.minutes),this.setMeridiem(a.meridiem),this.options.showSeconds&&this.setSeconds(a.seconds)},getTime:function(){return[this.formatTime(this.getHours(),this.getMinutes(),this.getMeridiem(),this.getSeconds())]},setHours:function(a){var b=new Date;b.setHours(a);var c=this.parseHours(b.getHours());this.hoursElem.text(c),this.selectedHour=c},getHours:function(){var a=new Date;return a.setHours(this.hoursElem.text()),a.getHours()},parseHours:function(a){return!1===this.options.twentyFour?(a+11)%12+1:a<10?"0"+a:a},setMinutes:function(a){var b=new Date;b.setMinutes(a);var c=b.getMinutes(),d=this.parseSecMin(c);this.minutesElem.text(d),this.selectedMin=d},getMinutes:function(){var a=new Date;return a.setMinutes(this.minutesElem.text()),a.getMinutes()},parseSecMin:function(a){return(a<10?"0":"")+a},setMeridiem:function(a){var b="";if(void 0===a){b="PM"===this.getMeridiem()?"AM":"PM"}else b=a;this.meridiemElem.text(b),this.selectedMeridiem=b},getMeridiem:function(){return this.meridiemElem.text()},setSeconds:function(a){var b=new Date;b.setSeconds(a);var c=b.getSeconds(),d=this.parseSecMin(c);this.secondsElem.text(d),this.selectedSec=d},getSeconds:function(){var a=new Date;return a.setSeconds(this.secondsElem.text()),a.getSeconds()},parseMeridiem:function(a){return a>11?"PM":"AM"},handleTimeAdjustments:function(a){var b=0;$(this.up).add(this.down).off("mousedown click touchstart").on("mousedown click",{Wickedpicker:this,input:a},function(a){if(1!=a.which)return!1;var c=this.className.indexOf("up")>-1?"+":"-",d=a.data;"mousedown"==a.type?b=setInterval($.proxy(function(a){a.Wickedpicker.changeValue(c,a.input,this)},this,{Wickedpicker:d.Wickedpicker,input:d.input}),200):d.Wickedpicker.changeValue(c,d.input,this)}).bind("mouseup touchend",function(){clearInterval(b)})},changeValue:function(operator,input,clicked){var target="+"===operator?clicked.nextSibling:clicked.previousSibling,targetClass=$(target).attr("class");targetClass.endsWith("hours")?this.setHours(eval(this.getHours()+operator+1)):targetClass.endsWith("minutes")?this.setMinutes(eval(this.getMinutes()+operator+this.options.minutesInterval)):targetClass.endsWith("seconds")?this.setSeconds(eval(this.getSeconds()+operator+this.options.secondsInterval)):this.setMeridiem(),this.setText(input)},setText:function(a){$(a).val(this.formatTime(this.selectedHour,this.selectedMin,this.selectedMeridiem,this.selectedSec)).change()},getText:function(a){return $(a).val()},formatTime:function(a,b,c,d){var e=a+this.options.timeSeparator+b;return this.options.twentyFour&&(e=a+this.options.timeSeparator+b),this.options.showSeconds&&(e+=this.options.timeSeparator+d),!1===this.options.twentyFour&&(e+=" "+c),e},setHoverState:function(){var a=this;isMobile()||$(this.up).add(this.down).add(this.close).hover(function(){$(this).toggleClass(a.options.hoverState)})},makePickerInputClearable:function(a){$(a).wrap('<div class="clearable-picker"></div>').after("<span data-clear-picker>&times;</span>"),$("[data-clear-picker]").on("click",function(a){$(this).siblings(".hasWickedpicker").val("")})},timeArrayFromString:function(a){if(a.length){var b=a.split(":");return b[2]=b.length<3?"00":b[2],b}return!1},_time:function(){var a=$(this.element).val();return""===a?this.formatTime(this.selectedHour,this.selectedMin,this.selectedMeridiem,this.selectedSec):a},_hide:function(){this.hideTimepicker(this.element)}}),$.fn[pluginName]=function(a,b){return $.isFunction(Wickedpicker.prototype["_"+a])?$(this).hasClass("hasWickedpicker")?void 0!==b?$.data($(this)[b],"plugin_"+pluginName)["_"+a]():$.data($(this)[0],"plugin_"+pluginName)["_"+a]():void 0:this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Wickedpicker(this,a))})}}(jQuery,window,document);